# Project Euler 295 Solution - Lenticular Holes

<https://projecteuler.net/problem=295>:

* [295.py](295.py)

# Lenticular Holes Solution Notes

## Key Geometry
- Two circles intersect at lattice points `P,Q`. The vector `PQ = (u,v)` must be primitive; otherwise lattice points on the chord lie strictly inside the lens.
- With `u,v` odd and `gcd(u,v)=1`, the centers lie on the perpendicular bisector and the radii satisfy
  `r^2 = (u^2+v^2)(1+m^2)/4` with odd `m`.
- For a fixed `s = u^2+v^2` and `m`, the **symmetric** case `m1=m2=m` is the largest possible overlap. If that lens is empty, then all `m2 >= m1` are empty (intersection only shrinks).

## Emptiness Test for `m1=m2`
- Lattice points lie on lines `u*y - v*x = k` (parallel to the chord). For a fixed `k`, all lattice points on that line are
  `(x,y) = (x0,y0) + t*(u,v)` with integer `t`.
- For each line `k = 1..k_max`, intersect the line with **both** circles and check whether the intersection interval contains any integer `t`.
- `k_max` is the maximum chord-parallel offset that could still be inside the overlap:
  `k_max = floor( s / (2*(sqrt(1+m^2)+m)) )`.
- If no `k` line yields a lattice point, the symmetric lens is empty.

## Counting Distinct Pairs
- For each valid `s`, let `m0(s)` be the minimal odd `m` such that the symmetric lens is empty. Then all odd `m >= m0(s)` are valid.
- Each valid `m` produces a radius value `r^2 = s*(1+m^2)/4`.
- Build a map from each `r^2` to the set of `s` values that can generate it.
- Group radii by identical `s`-sets and count pairs via set intersections:
  - Pairs inside a group contribute `c*(c+1)/2`.
  - Singleton groups only intersect matching `s`.
  - Multi-set groups are small; pairwise intersection checks are inexpensive.

## Practical Bounds
- We only generate `s = u^2+v^2` up to `4N`. Empirically and by the line-offset analysis, `m0(s)` grows at least on the order of `sqrt(s)`, so for larger `s` the radius constraint forces `m_max < m0(s)` and no values contribute.

## Files
- `main.py` implements the above and includes asserts for `L(10)=30` and `L(100)=3442`.
