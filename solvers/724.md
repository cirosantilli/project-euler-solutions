# Project Euler 724 Solution - Drone Delivery

<https://projecteuler.net/problem=724>:

* [724.py](724.py)

This solution turns the drone process into a **coupon-collector** problem and computes the required expectation using **harmonic numbers** plus an **asymptotic expansion**.

## Key observations

### 1) Total distance depends only on the stopping time
Let `C` be the number of instructions until **every** drone has been instructed at least once (coupon collector completion time).

At second `t` (starting from `t = 0`), exactly one drone’s speed increases by 1, so the **sum of all speeds** after that update is always `t+1`.

Therefore, the **total distance** traveled by all drones over `C` seconds is deterministic given `C`:
\[
\sum_{t=0}^{C-1} (t+1)=\frac{C(C+1)}{2}.
\]

Since there are `n` packages, the average distance (and hence the expected distance of a randomly chosen package) is:
\[
E(n)=\mathbb{E}\left[\frac{C(C+1)}{2n}\right].
\]

### 2) Coupon collector moments
In coupon collection with `n` equally-likely coupons, the waiting times to collect a new coupon are independent geometric random variables with parameters `j/n` for `j=1..n`.

This yields closed forms for the first two moments, which combine neatly into:
\[
\mathbb{E}[C(C+1)] = n^2\left(H_n^2 + H_n^{(2)}\right),
\]
where
- \(H_n = \sum_{k=1}^n \frac{1}{k}\) is the harmonic number
- \(H_n^{(2)} = \sum_{k=1}^n \frac{1}{k^2}\) is the second-order harmonic number

So the final formula is:
\[
E(n) = \frac{n}{2}\left(H_n^2 + H_n^{(2)}\right).
\]

### 3) Fast evaluation for `n = 10^8`
Direct summation is too slow for \(10^8\), so the code uses Euler–Maclaurin asymptotic expansions:

- \(H_n = \log n + \gamma + \frac{1}{2n} - \frac{1}{12n^2} + \cdots\)
- \(H_n^{(2)} = \frac{\pi^2}{6} - \frac{1}{n} + \frac{1}{2n^2} - \frac{1}{6n^3} + \cdots\)

For \(n=10^8\), only a few terms are needed to get **far better than 0.5** absolute accuracy in the final value, making rounding safe.

## Testing
The program includes `assert`s for the sample values given in the problem statement (`n=2`, `n=5`, and the numerical check for `n=100`).

## Output
Running `python3 main.py` prints the required integer (rounded to the nearest integer).
