# Project Euler 527 Solution - Randomized Binary Search

<https://projecteuler.net/problem=527>:

* [527.py](527.py)

This repository contains a fast solution for computing:

\[
R(10^{10}) - B(10^{10})
\]

rounded to **8 decimal places**, where:

- **B(n)** is the expected number of guesses using **standard binary search** (midpoint `floor((L+H)/2)`).
- **R(n)** is the expected number of guesses using a **randomized variant** (pick a uniform random guess in `[L, H]` each step).

## Main techniques used

### 1) Expected-value recurrences on interval size

Both algorithms only depend on the **current interval length**.

- **Standard binary search** (deterministic split)

  Let `g = floor((1+n)/2)` (the first guess when the interval size is `n`).
  With left size `g-1` and right size `n-g`, the expectation satisfies:

  \[
  B(n) = 1 + \frac{g-1}{n}B(g-1) + \frac{n-g}{n}B(n-g)
  \]

  Because each recursive call roughly halves the size, memoized recursion evaluates only **O(log n)** distinct sizes for one big `n` (here about a few dozen).

- **Random binary search** (random pivot)

  Condition on a uniformly random guess `g` and a uniformly random target `t`, and reduce to subproblems of sizes `g-1` and `n-g`. This yields a summation recurrence that can be rewritten in terms of prefix sums.

### 2) Closed form for the randomized variant

After algebraic simplification, the randomized recurrence collapses to a closed form involving the harmonic number \(H_n\):

\[
R(n) = 2\frac{n+1}{n}H_n - 3
\]

So the randomized side is computed in O(1), once \(H_n\) is available.

### 3) Fast harmonic numbers via asymptotic expansion

For huge `n`, direct summation of \(H_n\) is impossible. We use the classic asymptotic expansion:

\[
H_n = \ln n + \gamma + \frac{1}{2n} - \frac{1}{12n^2} + \frac{1}{120n^4} - \cdots
\]

For \(n=10^{10}\), just a few terms give error far below whatâ€™s needed for **8-decimal rounding**.

## Output

Running `python3 main.py` prints the requested value (to 8 decimals).
