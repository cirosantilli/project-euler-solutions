# Project Euler 581 Solution - $47$-smooth Triangular Numbers

<https://projecteuler.net/problem=581>:

* [581.py](581.py)

We want the sum of all indices `n` such that the triangular number

\[
T(n) = \frac{n(n+1)}{2}
\]

has **no prime factors larger than 47** (i.e. is *47-smooth*).

## Core ideas used

### 1) Coprimality reduces the problem to *consecutive smooth numbers*

Because:

- `gcd(n, n+1) = 1`
- `2` is itself ≤ 47

we have:

> `T(n)` is 47-smooth  **iff**  `n` and `n+1` are both 47-smooth.

So the problem becomes:

> Find every pair of **consecutive** 47-smooth integers `(n, n+1)` and sum the smaller one.

### 2) Størmer's theorem gives a finite search

Størmer's theorem states that for any finite prime set `P` containing 2, there are only **finitely many**
pairs of consecutive `P`-smooth numbers, and provides a way to generate them (via Pell equations).

Instead of implementing the full Pell-equation machinery, this solution uses the known proven bound for
the *largest* number in a consecutive pair of 47-smooth integers:

- `1109496723126` (OEIS **A117581**, 15th term — since 47 is the 15th prime)

Therefore, it suffices to search among 47-smooth numbers up to that limit.

### 3) Generate all 47-smooth numbers up to the bound efficiently (multi-pointer “Hamming” method)

To avoid factoring every `n`, we **generate** all smooth numbers in increasing order using the classic
“Hamming numbers / ugly numbers” multi-pointer technique:

- Maintain a growing sorted list `smooth`
- For each prime `p`, keep an index `i_p` so that the next candidate from that prime is `p * smooth[i_p]`
- The next smooth number is `min(all candidates)`
- Advance every prime-pointer that matches the minimum (deduplicates overlaps like `2*3` vs `3*2`)

While generating, whenever two consecutive generated values differ by 1, we’ve found a valid `(n, n+1)`.

## Complexity (practical)

- Generates about **9.5 million** 47-smooth numbers up to the bound.
- Uses only integer arithmetic and `array('Q')` to keep memory reasonable.

## Files

- `main.py` — computes and prints the Project Euler answer.
