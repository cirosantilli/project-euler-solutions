# Project Euler 228 Solution - Minkowski Sums

<https://projecteuler.net/problem=228>:

* [228.py](228.py)

## Main idea

For convex polygons, the Minkowski sum `P + Q` is also a convex polygon.
A crucial property is:

> The set of outward edge-normal directions of `P + Q` is the union of the outward
> edge-normal directions of `P` and `Q` (directions that coincide merge into one edge).

So the number of sides of a Minkowski sum equals the number of **distinct** edge-normal
directions present in any summand.

## Edge normals of the given regular polygons

The polygon `S_n` is a regular `n`-gon centered at the origin. Its edges are tangent
to the circumcircle at equally spaced angles, which implies the outward normals point
in exactly the `n` directions:

- angles `2πk/n` for `k = 0..n-1`

So `S_n` contributes all `n`-th roots of unity as directions.

## Turning “distinct directions” into number theory

A direction `exp(2πi * k/n)` has **order** `d = n / gcd(k, n)`.

- Directions with a given order `d` are exactly the **primitive `d`-th roots of unity**
- There are `φ(d)` such primitive roots (`φ` is Euler’s totient function)

Therefore, the total number of distinct directions in a collection of polygons is:

- `sum_{d in D} φ(d)`

where `D` is the set of all orders `d` that occur.

For an interval `S_L + ... + S_R`, an order `d` occurs **iff** there exists some `n`
in `[L, R]` divisible by `d`, i.e.:

- `ceil(L/d) * d <= R`

## Algorithm

1. Compute `φ(d)` for all `d <= R` using a totient sieve.
2. For each `d = 1..R`, check if `d` has a multiple in `[L, R]`.
3. If yes, add `φ(d)` to the answer.

This is fast here because `R = 1909` is small.

## Correctness check

The statement’s example says `S_3 + S_4` has 6 sides, so the program asserts:

- `count_sides_interval(3, 4) == 6`

## Run

```bash
python3 solution.py
