# Project Euler 922 Solution - Young's Game A

<https://projecteuler.net/problem=922>:

* [922.py](922.py)

This solution uses **Combinatorial Game Theory**, convolution techniques, and fast transforms
to count the number of ordered staircase selections where **Right wins**.

---

## 1. Game Decomposition

Each `(a,b,k)` staircase game reduces (in canonical CGT form) to:

- a **number part**: `b - a`
- an **impartial nimber part**: `*(k-1)` (a Nim heap of size `k-1`)

So the game is equivalent to:

> **(b − a) + nimber(k−1)**

This matches both sample constraints and allows efficient computation.

---

## 2. Winning Condition

For an ordered tuple of `m` staircases:

- Let `D = sum(b_i − a_i)`
- Let `G = XOR(k_i − 1)`

Then Right (moving first) wins iff:

- `D > 0`, OR
- `D == 0` AND `G != 0`

The nimber term is infinitesimal and cannot overturn a nonzero integer advantage.

---

## 3. Counting via Convolution

We need to count distributions of:

- integer sums `D` (range roughly `[-m(w-2), +m(w-2)]`)
- XOR sums `G` (fits in 6 bits since `k-1 <= 61`)

This is a convolution problem over the group:

> **Z × (Z₂)^6**

---

## 4. Walsh–Hadamard Transform (XOR Convolution)

XOR convolution becomes pointwise multiplication after applying the
**Fast Walsh–Hadamard Transform (FWT)**.

For each `D` coefficient we store an array over XOR states (size 64) and transform it.

After transforming, each XOR frequency `t` becomes an independent polynomial in `D`.

---

## 5. Polynomial Exponentiation

In the transformed space, choosing `m` staircases corresponds to raising each polynomial
to the `m`th power.

Since `m=8`, exponentiation is fast (only a few squarings).

---

## 6. Inverse Transform + Final Sum

After powering, an inverse FWT reconstructs `(D,G)` counts.

We sum all cases meeting the winning condition modulo `1e9+7`.

---

## Complexity

- State size: about `1000 × 64`
- Transforms: tiny (64-point Hadamard)
- Polynomial multiplications: manageable due to small degree and m=8

Runs quickly in pure Python.

---

✅ Includes asserts for:
- `R(2,4)=7`
- `R(3,9)=314104`
