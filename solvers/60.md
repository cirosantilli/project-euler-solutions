# Project Euler 60 Solution - Prime Pair Sets

<https://projecteuler.net/problem=60>:

* [60.py](60.py)
* [60.lean](60.lean)

We need five primes such that for any two primes `p` and `q`, both concatenations `pq` and `qp` are prime. The goal is to minimize the sum of the five primes.

### Key ideas

- **Ignore 2 and 5**: any concatenation ending in an even digit or 5 is composite, so sets cannot include 2 or 5.
- **Fast primality test**: concatenations can reach ~8 digits (and a bit more in search). A deterministic **Miller–Rabin** primality test for 64-bit integers is used.
- **Strong modular pruning (mod 3)**:
  - Since `10^k ≡ 1 (mod 3)`, we have `concat(p,q) ≡ p + q (mod 3)`.
  - If `(p + q) % 3 == 0`, then both concatenations are divisible by 3 and (being > 3) are composite.
  - This rejects many pairs cheaply.

### Search strategy

- Use **backtracking** to build a clique (size 5) in the implicit compatibility graph:
  - Two primes are connected if both concatenations are prime.
- Maintain a candidate list that is always compatible with the current partial clique.
- Use **sum lower-bound pruning**:
  - If the current sum plus the smallest possible remaining picks cannot beat the best found sum, stop exploring that branch.
- Cache results of the pair compatibility checks to avoid repeated primality work.

This finds the minimal-sum 5-prime set efficiently and outputs the minimal sum: `26033`.
