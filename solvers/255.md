# Project Euler 255 Solution - Rounded Square Roots

<https://projecteuler.net/problem=255>:

* [255.py](255.py)

This repository contains a pure-Python solution to **Project Euler 255**.

## Key ideas used

### 1) Replace “iterate over `n`” with “iterate over the rounded root”
The rounded-square-root being computed is the nearest integer to `sqrt(n)`.  
For an integer `m`, the set of integers `n` that round to `m` is exactly:

- `n ∈ [m² - m + 1, m² + m]`  (length `2m`)

These intervals are contiguous and partition the positive integers, so a large range of `n`
can be handled by summing over the corresponding `m` intervals.

### 2) Work inside each `m`-interval using an offset `s`
Write numbers as `n = m² + s`, where `s` ranges over the interval endpoints above.

For a **fixed** current iterate `x`, the algorithm needs `ceil(n/x)`. Over a contiguous range
of `s`, the value of `ceil((m²+s)/x)` is piecewise-constant on contiguous sub-intervals.
That makes it possible to split `[s_lo, s_hi]` into a small number of sub-intervals where:

- `q = ceil((m²+s)/x)` is constant  
- therefore `x_next = floor((x + q)/2)` is also constant

This turns “sum iterations over millions of `n`” into “sum iterations over a handful of
sub-intervals”.

### 3) Keep the state space tiny by merging adjacent intervals
After each split, adjacent sub-intervals that share the same `(x_next, iteration_index)`
are merged. In practice this keeps only a few segments alive at any time.

### 4) Exact arithmetic and exact rounding (no floats)
The program accumulates:

- `total_iterations` as an integer
- `count` as an integer

The final average is rounded to 10 decimal places using integer arithmetic (round-half-up),
so there is no floating point drift.

### 5) Parallelize the full-interval sum with `multiprocessing`
For the 14-digit range, only the first and last rounded-root intervals are partial; all
middle intervals are full. The middle portion is split into chunks of `m` values and
summed in parallel worker processes.

You can control the number of worker processes via:

- `PE255_PROCS=1` (disable multiprocessing)
- `PE255_PROCS=<k>` (use `k` processes)

## Running

```bash
python3 main.py
```

The script prints the required 10-decimal result for 14-digit numbers.
