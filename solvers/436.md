# Project Euler 436 Solution - Unfair Wager

<https://projecteuler.net/problem=436>:

* [436.py](436.py)

This repository solves Project Euler problem 436.

## Key techniques

### 1) Sums of independent Uniform(0, 1) variables (Irwin–Hall)
If \(S_n = U_1 + \dots + U_n\) with i.i.d. \(U_i \sim \mathrm{Uniform}(0,1)\), then on the interval \(0 \le s \le 1\),
the density is especially simple:

\[
f_{S_n}(s) = \frac{s^{n-1}}{(n-1)!}\quad (0 \le s \le 1).
\]

This comes from repeated convolution with the uniform density.

### 2) Stopping-time “last draw” distributions
Let Louise stop when her running sum first exceeds 1. If \(x\) is her last draw and \(p\) is the post-stop sum,
then the constraints are:

- the previous sum is \(p-x \le 1\)
- the new sum satisfies \(1 < p \le 1+x\)

Conditioning on the number of draws \(n\) and summing over all \(n\) yields a compact density for \((P, X)\),
which can be expressed using an exponential series and collapses to an \(e^{(\cdot)}\) term.

### 3) Conditioning for the second player
Julie starts from the carried-over sum \(p\) and stops when the total exceeds 2. This is equivalent to a fresh process
stopping when the partial sum exceeds \(2-p\). The resulting conditional density \(f_{Y\mid P}(y\mid p)\) is piecewise,
depending on whether \(y < 2-p\) or \(y \ge 2-p\).

### 4) Joint density and region integration
Multiply \(f_{X,P}(x,p)\) and \(f_{Y\mid P}(y\mid p)\), integrate out \(p\), and then integrate the joint density of \((x,y)\)
over the region where the second player wins (\(y>x\)).

This leads to a closed form for the win probability:

\[
\Pr(Y > X) = \frac{1 + 14e - 5e^2}{4}.
\]

## Implementation notes

- `main.py` computes the closed form using Python’s standard-library `decimal` module to ensure correct rounding to 10
  decimal places.
- The example sequence from the problem statement is asserted as a deterministic self-test.

## Output

Running `python3 main.py` prints the probability in the required `0.abcdefghij` format.
