# Project Euler 894 Solution - Spiral of Circles

<https://projecteuler.net/problem=894>:

* [894.py](894.py)

This repository contains a standard-library-only solution in `main.py`.

## Main techniques used

### 1) Encode the spiral with one similarity ratio
Each circle is obtained from the previous by scaling by `s` (`0 < s < 1`) and
rotating by `theta` about the origin. With the complex ratio `z = s * e^{i theta}`:

- `radius(C_k) = s^k`
- `centre(C_k) = z^k * centre(C_0)`

### 2) Reduce the unknown geometry to solving for (s, theta)
Let `d = |centre(C_0)|`. The distance between centres of `C_0` and `C_n` is
`d * |1 - z^n|`. External tangency gives:

`d * |1 - z^n| = 1 + s^n`.

Using the given tangencies for `n = 1, 7, 8` and eliminating `d` yields:

`|1 - z|/(1+s) = |1 - z^7|/(1+s^7)`
`|1 - z|/(1+s) = |1 - z^8|/(1+s^8)`.

`main.py` solves these numerically:
- coarse grid search to locate the right root region
- a damped 2D Newton method with a finite-difference Jacobian

### 3) Use self-similarity to turn an infinite sum into a geometric series
If `C_0` is tangent to `C_n`, then applying the same similarity transform `k` times
shows `C_k` is tangent to `C_{k+n}`. From the problem data, every circle is tangent
to the circles with index offsets `1`, `7`, and `8`.

These tangencies create two repeating families of mutually tangent triples:

- `(C_k, C_{k+1}, C_{k+8})`
- `(C_k, C_{k+7}, C_{k+8})`

Each family’s triangles are scaled copies of the `k = 0` triangle, so areas scale by
`s^{2k}`. The total area is therefore:

`total = (A1 + A2) / (1 - s^2)`,

where `A1` and `A2` are the base areas of the two triangle types.

### 4) Compute curvilinear-triangle area using only the radii
For three externally tangent circles with radii `r1, r2, r3`:

- the centres form an ordinary triangle with side lengths `r_i + r_j`
- the curvilinear triangle area equals:
  `area(centre triangle) - (three circular sector areas)`

The centre-triangle area uses Heron’s formula, and the sector angles are the triangle
angles at the corresponding centres (law of cosines).

## Running

```bash
python3 main.py
It prints the required value rounded to 10 places after the decimal point.
