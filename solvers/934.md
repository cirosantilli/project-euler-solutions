# Project Euler 934 Solution - Unlucky Primes

<https://projecteuler.net/problem=934>:

* [934.py](934.py)

This repository contains a pure-Python solution (no third‑party libraries) for Project Euler 934, **Unlucky Primes**.

## Key ideas used

### 1) Rephrase the condition as modular constraints
For a prime `p`, the “bad” case (meaning we *do not* stop at `p`) is:

- `n mod p` **is** a multiple of 7.

So after processing primes up to `p_k`, the surviving numbers are exactly those `n` that satisfy the modular constraint above for **every** processed prime.

### 2) Track survivors via CRT residues while the modulus is small
Let `M` be the product of processed primes.

- The constraints define a set of allowed residues `R ⊆ [0, M-1]`.
- Every `n` that survives is congruent to one of these residues modulo `M`.

When adding a new prime `p`, we combine:

- each old residue `r (mod M)`
- with each allowed residue `s (mod p)` (i.e. `s` in `0, 7, 14, ...`)

using the **Chinese Remainder Theorem** to get a new residue modulo `M·p`.

### 3) Count up to `N` using periodicity
As long as `M ≤ N`, survivors repeat every `M`. If `R` is the residue list:

- `q, rem = divmod(N, M)`
- survivors count is `q * |R|` plus one extra hit for each residue `r` with `1 ≤ r ≤ rem`

This avoids iterating over all `n ≤ N`.

### 4) Switch to explicit enumeration once `M > N`
When the modulus exceeds `N`, each valid residue corresponds to **at most one** number in `[1..N]`.

At that point, the program switches representation:

- build the explicit list of surviving `n` values (`n ≤ N`)
- for each subsequent prime, filter that list by checking whether `(n mod p)` is divisible by 7

The list shrinks quickly, so this stays fast.

### 5) Turn survivor counts into the desired sum
Let `c_prev` be the number of survivors before testing a prime `p`, and `c` after.

- exactly `c_prev - c` numbers have `u(n) = p`
- contribution to `U(N)` is `p * (c_prev - c)`

Accumulating this over primes yields `U(N)`.

## What’s in the code

- `main.py` implements the algorithm above and includes `assert` checks for all example values stated in the problem.
- Running `python3 main.py` prints the required result for `N = 10^17`.
