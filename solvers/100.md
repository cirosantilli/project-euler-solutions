# Project Euler 100 Solution - Arranged Probability

<https://projecteuler.net/problem=100>:

* [100.py](100.py)
* [100.lean](100.lean)

We need integers `b` (blue) and `n=b+r` (total) such that drawing two blues without replacement has probability `1/2`:

\[
\frac{b}{n}\cdot\frac{b-1}{n-1}=\frac12
\;\;\Longleftrightarrow\;\;
2b(b-1)=n(n-1).
\]

## Pell equation transformation

Introduce odd-integer substitutions:

- \( u = 2n - 1 \)
- \( v = 2b - 1 \)

Then:

- \( n(n-1)=\frac{u^2-1}{4} \)
- \( 2b(b-1)=\frac{v^2-1}{2} \)

Equating them yields the negative Pell equation:

\[
u^2 - 2v^2 = -1.
\]

Every solution \((u,v)\) produces a valid \((n,b)\) via:

\[
n=\frac{u+1}{2},\quad b=\frac{v+1}{2}.
\]

## Generating solutions efficiently

Solutions to \(u^2-2v^2=-1\) can be generated by multiplying by the fundamental solution of
\(x^2-2y^2=1\), which is \((3,2)\). This gives the recurrence:

\[
u' = 3u + 4v,\quad v' = 2u + 3v.
\]

Starting from \((u,v)=(1,1)\), we iterate until \(n>10^{12}\). This takes only ~15â€“20 iterations.

The program prints the number of blue discs `b` for the first arrangement with total discs exceeding \(10^{12}\).
