# Project Euler 900 Solution - DistribuNim II

<https://projecteuler.net/problem=900>:

* [900.py](900.py)

This repository solves the special impartial game described in the statement and computes:

\[
S(N)=\sum_{n=1}^{2^N} t(n)\quad\text{for }N=10^4
\]

with the final result taken modulo `900497239`.

## Key ideas

### 1) Reduce the game to a modular divisibility check

For a position, only three pieces of information matter:

- the size of the smallest pile `m`,
- the number of other piles (only its parity matters),
- the sum of the other pile sizes.

Let `p` be the smallest power of two **strictly larger** than `m`.  
A position is losing exactly when a simple expression in the “other-pile sum” is divisible by `p`.

### 2) Closed form for `t(n)`

In the problem’s special family of positions:

- there are `n` piles of size `n`,
- one pile of size `n + k`,
- we seek the smallest `k ≥ 0` that makes the position losing.

The “other-pile sum” becomes `n^2 + k`, and the parity adjustment becomes `(n mod 2)`.  
With `p = next power of two strictly greater than n`, the minimal `k` is:

\[
t(n) \equiv -n^2 - (n \bmod 2)\pmod p,
\quad\text{chosen in }[0,p-1].
\]

This makes evaluating `t(n)` an `O(1)` operation.

### 3) A short linear recurrence for `S(N)`

Even though `S(N)` is a sum over `2^N` terms, the sequence in `N` satisfies a fixed order-5 linear recurrence:

\[
S(n)=7S(n-1)-6S(n-2)-48S(n-3)+112S(n-4)-64S(n-5)\quad(n\ge 6).
\]

The program:

1. computes small exact values `S(1)…S(15)` directly (only `2^15` terms),
2. asserts the statement’s sample values,
3. verifies the recurrence on those exact values,
4. iterates the recurrence up to `N = 10^4` while reducing modulo `900497239`.

That yields an `O(N)` time and `O(1)` memory solution for the required `N`.
