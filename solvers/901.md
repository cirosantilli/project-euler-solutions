# Project Euler 901 Solution - Well Drilling

<https://projecteuler.net/problem=901>:

* [901.py](901.py)

This repository contains a solution (`main.py`) for Project Euler problem 901.

The program prints the minimal expected drilling time (hours) rounded to 9 digits after the decimal point.

## Main techniques used

### 1) Reduce the strategy to an increasing depth sequence
After drilling to depth \(d\), a failure means the water is deeper than \(d\). Repeating a smaller (or equal) depth would fail with certainty, so an optimal strategy can be expressed as a strictly increasing sequence

\[
0=d_0 < d_1 < d_2 < \cdots
\]

where attempt \(i\) drills to depth \(d_i\).

For this schedule, the expected total time can be written directly from the survival function:

\[
\mathbb{E}[T] = \sum_{i\ge 1} d_i\,\Pr(X>d_{i-1}) = \sum_{i\ge 1} d_i e^{-d_{i-1}}.
\]

### 2) Use first-order optimality to get a recurrence
Treating \(\mathbb{E}[T]\) as a function of the variables \(d_1,d_2,\ldots\), each interior variable \(d_k\) only appears in two neighboring terms:

\[
\cdots + d_k e^{-d_{k-1}} + d_{k+1} e^{-d_k} + \cdots
\]

Setting the derivative with respect to \(d_k\) to zero yields

\[
e^{-d_{k-1}} = d_{k+1} e^{-d_k},
\]

which rearranges to the recurrence

\[
 d_{k+1} = \exp(d_k - d_{k-1})\quad (k\ge 1),\; d_0=0.
\]

This turns the infinite-dimensional optimization into choosing a single parameter \(d_1\); the recurrence generates the rest of the schedule.

### 3) Simplify the expected-value series under the recurrence
Under the recurrence, the expected-time sum collapses into a very fast-converging series involving only \(e^{-d_n}\). This avoids multiplying enormous depths by tiny probabilities and makes the computation numerically stable.

The series is truncated once the next term is far below what could affect 9-digit rounding.

### 4) Numerical minimization in one dimension
The solution searches for the best \(d_1\) with:

- a **coarse scan** (double precision) to find a neighborhood of the global minimum,
- a **golden-section search** (no derivatives needed) to refine the minimizer,
- **`decimal` high precision arithmetic** to ensure the final value rounds correctly to 9 decimal places.

All of these steps are implemented with Pythonâ€™s standard library only.
