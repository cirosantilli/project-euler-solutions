# Project Euler 957 Solution - Point Genesis

<https://projecteuler.net/problem=957>:

* [957.py](957.py)

## Key reframing

The daily operation is easiest to understand by tracking **families of lines through each red point** rather than tracking blue points directly.

A projective change of coordinates can place the three red points at “infinity” in three distinct directions. In that normalization, every relevant line is one of three parallel families (think: horizontal / vertical / diagonal), and every blue point is an intersection of two such families.

## Algebraic encoding

After normalization, each line in a family can be described by a single scalar parameter. Picking the initial blue points “generically” makes those parameters behave like products of a few independent symbols. That lets us encode every line by an **integer exponent vector** instead of a geometric object.

The day-to-day rule for producing new lines becomes a simple operation on these exponent vectors, equivalent to taking specific **Minkowski sums** (and sign changes) of integer sets.

## Shape and counting

The reachable exponent vectors after `n` days form a very regular region: an integer-lattice **hexagon-like** shape whose “radius” grows on the order of `2^n/3`. Counting distinct lines is then counting lattice points in this region.

The number of new blue points after a day can be expressed using:
- pairwise intersections between two line families, minus
- the overcount coming from triple intersections.

Both counts reduce to counting integer solutions to linear constraints inside those growing regions, which yields an **Ehrhart-style quasi-polynomial** (polynomial whose coefficients can depend on parity).

## Closed form

Specializing the quasi-polynomial to the doubling pattern that occurs here simplifies the result to an exact expression:
a fixed linear combination of `16^n`, `8^n`, `4^n`, `2^n`, and small alternating terms `(-1)^n`, `(-2)^n`, plus a constant.

The program evaluates that expression with integer arithmetic and prints `g(16)`.
