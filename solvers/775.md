# Project Euler 775 Solution - Saving Paper

<https://projecteuler.net/problem=775>:

* [775.py](775.py)

We wrap *n* unit cubes with paper that must touch the cubes everywhere, so the paper area equals the **surface area** of the union (a *polycube*).

## Key ideas

### 1) Turn “save paper” into “minimize surface area”
Wrapping cubes individually uses `6n` area.

If `s(n)` is the *minimum* achievable surface area among valid arrangements of `n` cubes, then:

- `g(n) = 6n - s(n)` is the maximum paper saved
- `G(N) = Σ g(n)` is the requested sum

So we need fast evaluation of `Σ s(n)` up to very large `N`.

### 2) Structure of surface-minimizing polycubes
For `k^3 < n ≤ (k+1)^3`, start from a full `k×k×k` cube and add cubes in **three orthogonal layers** of sizes:

- `k^2`
- `k(k+1)`
- `(k+1)^2`

Only the **first** cube of each layer increases surface by `4`; after that, each added cube increases surface by `0` or `2` depending on whether it sits at a “turn” of an expanding square spiral (the same turn locations as in a 2D Ulam-style spiral).

This yields an explicit formula for `s(n)` in terms of `k = floor((n-1)^(1/3))` and a small helper function `c(m)` that counts spiral-turn positions among the first `m` cubes in a layer.

### 3) Closed forms for the turn counter and its prefix sum
The turn counter has a simple integer form:

- `c(m) = max(0, isqrt(4m-1) - 1)`

To sum `c(m)` over many consecutive values we use an **O(1)** prefix-sum formula `F(t) = Σ_{m≤t} c(m)` derived from the block structure of `floor(sqrt(4m-1))` over intervals `(a^2, (a+1)^2]`.

### 4) Block summation up to N
`k = floor((n-1)^(1/3))` is constant on the block `n ∈ [k^3+1, (k+1)^3]`, so we sum `s(n)` **per block** instead of per `n`.

Within a block, the three layer phases are linear in length, so each block’s contribution becomes a few arithmetic operations plus a few calls to `F(t)`.

Overall runtime is `O(cuberoot(N))` iterations, which is fine for `N = 10^16`.

## Complexity
- Time: `O(⌊(N-1)^(1/3)⌋)` iterations
- Memory: `O(1)`

## Files
- `main.py` contains the full solution and asserts the test values given in the statement.
