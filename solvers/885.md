# Project Euler 885 Solution - Sorted Digits

<https://projecteuler.net/problem=885>:

* [885.py](885.py)

## Core idea

We need the sum of `f(d)` over all positive integers with at most `n` decimal digits, where `f(d)` is formed by:

1. taking the digits of `d`,
2. sorting them in nondecreasing order,
3. deleting every `0`.

A useful simplification is to view all numbers with at most `n` digits as **all length‑`n` digit strings** (allowing leading zeros). This represents the integers `0..10^n-1`. The special case of the all‑zero string contributes `0` anyway, so it doesn’t change the total.

## Turning the sum into a closed form

Instead of iterating through numbers, we count contributions in bulk.

Consider a fixed digit threshold `k` (from `1` to `9`). For any number, let:

- `u` = how many digits are `>= k`.

After sorting and deleting zeros, the digits `>= k` occupy the **last** `u` positions of the sorted string. This observation makes it possible to count, for each `k`, how often each power of `10` is “turned on” by digits at least `k`.

When you sum over all length‑`n` digit strings, each position independently ranges over `0..9`, so the needed counts reduce to binomial expansions of the form:

- choosing which positions are `>= k`,
- counting assignments of digits `< k` and `>= k`.

This collapses into an expression involving powers of a single constant, leading to:

\[
S(n)=\frac{1}{9}\sum_{k=1}^{9}(10+9k)^n - 10^n.
\]

The division by `9` is exact as an integer identity; for modular arithmetic we use the modular inverse of `9`.

## Implementation technique

- **Modular exponentiation** (`pow(base, exp, mod)`) computes `(10+9k)^n mod M` quickly.
- **Extended Euclid** computes the modular inverse of `9` modulo `M` (works whenever `gcd(9, M)=1`).
- The problem’s provided values `S(1)` and `S(5)` are checked with assertions using the same formula evaluated as exact integers.

## Complexity

The computation performs a constant amount of modular exponentiation (9 bases), so it runs in essentially `O(9 log n)` time and `O(1)` memory.
