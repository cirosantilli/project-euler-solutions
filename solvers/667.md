# Project Euler 667 Solution - Moving Pentagon

<https://projecteuler.net/problem=667>:

* [667.py](667.py)

This program computes the maximal area of an **equilateral pentagon** that can be moved around a **unit-width L-shaped corridor** without lifting.

Only basic floating-point math is used; no external libraries.

---

## 1. Shape Parameterization (Symmetry + Equilateral)

A symmetric equilateral pentagon can be described by one real parameter:

- Let the side length be 1 (unit model).
- Let `r` be the length of the *short diagonal* (the smallest diagonal).
- Under symmetry, this fixes the entire pentagon geometry.

The pentagon is constructed by combining three triangles:

- Two copies of `(1, 1, r)`
- One triangle `(r, r, 1)`

So the **unit-side area** is:

Area_unit(r) = 2 * Heron(1,1,r) + Heron(r,r,1)

yaml
Copy code

Scaling by a factor `s` multiplies area by `s²`.

---

## 2. Corridor Feasibility via Canonical “Push”

For each orientation angle `θ ∈ [0, π/2]`, the pentagon is:

1. Rotated by `θ`
2. Translated so that:
   - its lowest point touches the bottom corridor wall (`min y = 0`)
   - its rightmost point touches the right corridor wall (`max x = 1`)

After this canonical placement, the only forbidden zone is:

- **x < 0 and y > 1**

If any part of the polygon enters that region, the table collides with the inner corner.

Instead of sampling interior points, we check the polygon boundary exactly:
- the minimum `x` among boundary points where `y > 1`
- this minimum must be ≥ 0 for the placement to be safe

This is done by inspecting vertices and intersections of edges with `y = constant`.

---

## 3. Numerical Optimization Strategy

The goal is to maximize:

Area(r) = Area_unit(r) * s(r)²

yaml
Copy code

Where `s(r)` is the largest scale that keeps the pentagon feasible.

### Inner search (scale)
For fixed `r`, feasibility is monotone in `s`,
so `s(r)` is found by **bisection**.

### Outer search (shape)
The optimal shape is found by:

1. A coarse scan over `r` to find a good bracket
2. A **golden-section search** to maximize the area over that bracket
3. A final high-precision evaluation on the best `r`

---

## 4. Testing / Assertions

The problem statement provides one numeric check:

- the square model would give `1.0000000000`

The code asserts the formatter produces that exact string.

---

## Output

The program prints the answer rounded to **10 digits after the decimal point**.
