# Project Euler 394 Solution - Eating Pie

<https://projecteuler.net/problem=394>:

* [394.py](394.py)

## Key ideas

### 1) Reduce the geometry to a 1D multiplicative process
At any moment, the uneaten pie is a single circular sector. If its current angular size is a fraction `s` of the whole circle, and Jeff picks two random points (uniformly) on the remaining circular arc, the two new radii split the sector into three sub-sectors.

Jeff then eats the **first two** pieces encountered counterclockwise starting from the original initial cut. That means the **only piece that remains** is the tail segment after the **later** (maximum) of the two random cut points.

So the remaining fraction updates as:

- Let `U1, U2 ~ Uniform(0, 1)`.
- Let `M = max(U1, U2)`.
- The new remaining fraction is `s' = s * (1 - M)`.

Thus `s_n = Π (1 - M_i)` is a product of i.i.d. random factors.

### 2) Take logs to get an additive “hitting time” problem
Define `Z = -ln(1 - M)` and `S_n = Z1 + ... + Zn = -ln(s_n)`.
Jeff repeats while `s_n >= 1/x`, i.e. until `S_n > ln(x)`.

So `E(x)` is the expected number of steps to cross the level `a = ln(x)` in a renewal process.

### 3) Use a renewal equation and exploit an exponential-mixture density
From `M` having CDF `P(M ≤ t) = t^2`, we get that `Y = 1 - M` has density:

- `f_Y(y) = 2(1 - y)` on `[0, 1]`.

Transforming with `Z = -ln(Y)` gives a very convenient density:

- `f_Z(z) = 2(e^{-z} - e^{-2z})`, `z >= 0` (a difference of exponentials).

The expected crossing count `m(a)` satisfies a Volterra/renewal equation:

`m(a) = 1 + ∫_0^a m(a - z) f_Z(z) dz`.

Because `f_Z` is a linear combination of exponentials, the convolution terms can be rewritten using a small ODE system, which solves exactly.

### 4) Closed form
Solving the resulting linear ODE yields:

\[
E(x) = \frac{7}{9} + \frac{2}{3}\ln(x) + \frac{2}{9x^3}.
\]

This matches the sample values in the statement and makes computing `E(40)` immediate.

## Output
The program prints `E(40)` rounded to 10 decimal places.
