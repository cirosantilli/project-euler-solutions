# Project Euler 275 Solution - Balanced Sculptures

<https://projecteuler.net/problem=275>:

* [275.py](275.py)

This repository solves **Project Euler Problem 275** (“Balanced Sculptures”) by counting constrained polyominoes.

---

## Key Ideas

### 1) Mandatory Block Above the Plinth
The plinth is at `(0,0)` and all blocks must satisfy `y > 0`.
Since the polyomino must be connected, the only possible tile adjacent to the plinth is at `(0,1)`.

✅ Therefore **every valid sculpture includes `(0,1)`**.

We shift coordinates down by 1 so that `(0,1)` becomes the root cell `(0,0)` and all blocks satisfy:

- `y ≥ 0`
- polyomino remains connected
- balance condition becomes **sum of x-coordinates = 0**

---

### 2) Balance = Moment Condition
All blocks have equal mass, so the x-coordinate of the center of mass is:

\[
\frac{\sum x_i}{n}
\]

Balanced ⇔ `∑ x_i = 0`.

We track this moment incrementally during construction.

---

### 3) Redelmeier’s Algorithm (Connected Set Enumeration)
We need to enumerate connected polyominoes **without duplicates**.

Redelmeier’s method maintains:

- `S`: currently included cells
- `U`: untried frontier cells adjacent to `S`
- `X`: excluded cells (cells that were considered but rejected)

Each frontier cell branches into:

- **include** (add it to `S`, push unseen neighbors into `U`)
- **exclude** (move it into `X`)

This enumerates each connected polyomino exactly once.

---

### 4) Moment Pruning
A naive enumeration is too slow.

We prune when remaining blocks cannot bring the moment back to zero.

If we have `r` blocks left, current moment `m`, and the current x-range is `[minx, maxx]`,
then future blocks can extend x by at most `r` steps.

We compute safe bounds:

- `min_possible_x = minx - r`
- `max_possible_x = maxx + r`

So:

- smallest possible final moment ≈ `m + r * min_possible_x`
- largest possible final moment ≈ `m + r * max_possible_x`

If `0` is outside that interval, the branch is impossible and we stop early.

---

### 5) Reflection Handling via Symmetry Counting (Burnside)
Reflections about the y-axis are not counted as distinct.

Instead of checking canonical forms (expensive), we use:

- Let `T` = number of balanced sculptures counting mirror images separately.
- Let `S` = number of balanced sculptures symmetric under reflection.

Then:

\[
\text{distinct} = \frac{T + S}{2}
\]

This is a standard Burnside-style argument.

---

### 6) Fast Symmetric Counting
A symmetric sculpture is fully determined by its intersection with the half-plane `x ≥ 0`.

When enumerating half-plane shapes:

- blocks on the axis (`x=0`) contribute **1**
- blocks with `x>0` contribute **2** (because the mirror side exists too)

We enumerate connected sets in `x ≥ 0` using Redelmeier again, but with this weighted size rule.

---

## Result
The program prints the number of balanced sculptures of order **18**:

✅ **15030564**

---

## Included Validations
The following asserts are included because they are given in the problem statement:

- order 6 → 18  
- order 10 → 964  
- order 15 → 360505
