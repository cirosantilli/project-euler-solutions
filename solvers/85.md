# Project Euler 85 Solution - Counting Rectangles

<https://projecteuler.net/problem=85>:

* [85.py](85.py)
* [85.lean](85.lean)

For an `m × n` grid, any rectangle is determined by choosing 2 distinct vertical grid lines and 2 distinct horizontal grid lines.

- Number of ways to choose vertical sides:  
  \[
  \binom{m+1}{2} = \frac{m(m+1)}{2}
  \]
- Number of ways to choose horizontal sides:  
  \[
  \binom{n+1}{2} = \frac{n(n+1)}{2}
  \]

So the number of sub-rectangles is:
\[
R(m,n) = \frac{m(m+1)}{2} \cdot \frac{n(n+1)}{2} = \frac{m(m+1)n(n+1)}{4}
\]

We need `R(m,n)` closest to 2,000,000, and output the corresponding area `m·n`.

## Approach

1. Iterate `m` over a safe range (up to ~3000 is more than enough for 2,000,000).
2. For each `m`, compute `A = m(m+1)/2` and solve for `n` such that:
   \[
   \frac{n(n+1)}{2} \approx \frac{target}{A}
   \]
   using the quadratic formula to get an approximate `n`.
3. Check a small neighborhood around that `n` (to handle rounding), keeping the best absolute difference.
4. Use symmetry (`m ≤ n`) to halve the search.

This runs very fast (thousands of iterations with constant work each).
