# Project Euler 644 Solution - Squares on the Line

<https://projecteuler.net/problem=644>:

* [644.py](644.py)

## Key ideas

- Model the game as placing intervals of length `1` or `sqrt(2)` on a line; the remaining game splits into two independent subsegments, so the position is an impartial game with Grundy values.
- The Grundy value is constant on intervals between numbers of the form `a + b*sqrt(2)`; iterate those boundaries and compute the mex of reachable xor values by scanning existing Grundy intervals.
- To evaluate the win probability after the random first move, compute the overlap length `W(S)` where `g(t) == g(S - t)`; this is a sum of trapezoids from interval-pair convolutions.
- Build `W(S)` as a piecewise-linear function via slope-change events; then `e(L)` becomes a rational function on each segment.
- Maximize `e(L)` on `[a, b]` by scanning breakpoints derived from `W(S)` and checking endpoints plus any stationary points found by derivative sign changes.
