# Project Euler 236 Solution - Luxury Hampers

<https://projecteuler.net/problem=236>:

* [236.py](236.py)

This problem is a classic **Simpson’s paradox** setup: every per-product spoilage rate is worse for supplier **B** than **A** by the same factor \(m>1\), yet the *overall* spoilage rate is worse for **A** than **B** by that same factor.

The key is that spoilage counts are **integers**, so the equal-factor constraints become **Diophantine** (integer) constraints.

## Main techniques used

### 1) Turn “equal ratios” into Diophantine proportionality

For each product \(i\):

\[
\frac{b_i}{B_i} = m\cdot \frac{a_i}{A_i}
\quad\Longrightarrow\quad
b_i A_i = m\, a_i B_i
\]

With \(m\) rational, each product’s \((a_i,b_i)\) lies on a 1D integer ray: it’s an integer multiple of a *base pair* derived from a gcd.

### 2) Exploit shared supply ratios to collapse variables

For products 2, 3, and 5 the supply ratios satisfy

\[
\frac{A_i}{B_i}=\frac{41}{59}
\]

which implies

\[
m=\frac{41\,b_i}{59\,a_i}
\]

So the reduced ratio \(k=b_i/a_i = r/s\) is shared across those three products, and we can parametrize:

- \(a_2=s t_2,\; b_2=r t_2\)
- \(a_3=s t_3,\; b_3=r t_3\)
- \(a_5=s t_5,\; b_5=r t_5\)

### 3) Use gcd to get base solutions for the “odd” products

Enforcing the same \(m\) for products 1 and 4 produces proportionality constraints:

- Product 1: \(59s\,b_1 = 5r\,a_1\)
- Product 4: \(90s\,b_4 = 41r\,a_4\)

Each yields a base pair via gcd, e.g.

\[
(a_1,b_1)=\left(\frac{59s}{\gcd(59s,5r)},\frac{5r}{\gcd(59s,5r)}\right) t_1
\]

(and similarly for product 4).

### 4) Reduce the overall constraint to a linear condition

The overall spoilage condition

\[
\frac{\sum a_i}{\sum A_i} = m\cdot \frac{\sum b_i}{\sum B_i}
\]

depends on products 2/3/5 only through

\[
T = t_2+t_3+t_5
\]

so, after substitution, it becomes **linear in \(T\)**.  
For each \((r,s)\) and each choice of \((t_1,t_4)\), we solve for the unique integer \(T\) and check it lies within the achievable bounds.

### 5) Enumerate only \((r,s)\)

We enumerate coprime pairs \((r,s)\) within bounds implied by product 2, apply fast feasibility checks, and solve the linear condition. This produces exactly **35** valid values of \(m\), with smallest \(1476/1475\) and largest \(123/59\).

## Output

`main.py` prints the largest possible \(m\) as a reduced fraction.
