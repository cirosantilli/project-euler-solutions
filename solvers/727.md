# Project Euler 727 Solution - Triangle of Circular Arcs

<https://projecteuler.net/problem=727>:

* [727.py](727.py)

This repository contains a standalone Python solution (`main.py`) using only the standard library.

## Core ideas

### 1) Coordinate placement (reduce the geometry)
The three given circles (radii `ra < rb < rc`) are mutually and externally tangent, so their **centers** form a Euclidean triangle with side lengths:

- `AB = ra + rb`
- `BC = rb + rc`
- `CA = rc + ra`

We place the centers as:
- `A = (0, 0)`
- `B = (ra + rb, 0)`
- `C = (xC, yC)` with `yC > 0` computed by standard triangle coordinate formulas.

### 2) Tangency points and circumcenter `D`
The triangle in the problem is formed by the **three tangency points** between each pair of circles.
Each tangency point lies on the line segment between the two circle centers, at a distance equal to the corresponding radius from each center.

Once the three tangency points are known, the circumcenter `D` is the ordinary circumcenter of those three points, computed via the determinant-based closed form.

### 3) Incircle center `E` via Descartes + circle intersection
The green “incircle” is the **inner Soddy circle** tangent to all three given circles.

- Its radius `r4` is obtained using **Descartes’ theorem** on curvatures `k = 1/r`:
  - `k4 = k1 + k2 + k3 + 2*sqrt(k1k2 + k2k3 + k3k1)`
  - `r4 = 1/k4`

- Its center `E` satisfies:
  - `|EA| = ra + r4`
  - `|EB| = rb + r4`
  - `|EC| = rc + r4`

With `A` and `B` on the x-axis, the intersection of circles around `A` and `B` has a simple closed form, and the correct intersection is chosen to match tangency to `C` (and the intended side).

### 4) Expected value under a gcd constraint
We iterate over all integer triples `1 ≤ ra < rb < rc ≤ 100` with `gcd(ra, rb, rc) = 1`, compute `d = |DE|`, and average.

A compensated (Kahan) summation is used to reduce floating-point accumulation error before formatting to 8 decimals.

## Running

```bash
python3 main.py
