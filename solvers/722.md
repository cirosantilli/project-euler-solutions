# Project Euler 722 Solution - Slowly Converging Series

<https://projecteuler.net/problem=722>:

* [722.py](722.py)

## Key ideas

### 1) Rewrite the divisor-sum series as a Lambert series
The function
\[
E_k(q)=\sum_{n\ge 1}\sigma_k(n)\,q^n,\qquad \sigma_k(n)=\sum_{d\mid n} d^k
\]
is a classic Lambert series. It can be rewritten as:
\[
E_k(q)=\sum_{m\ge 1} m^k\frac{q^m}{1-q^m}.
\]
That form is still *slow* when \(q\) is close to \(1\).

### 2) Connect \(E_{2r-1}\) to Eisenstein series
For odd \(k=2r-1\), the \(q\)-series \(\sum_{n\ge 1}\sigma_{2r-1}(n)q^n\) is (up to a constant factor and an added constant term) the Fourier expansion of the holomorphic Eisenstein series of weight \(2r\):
- Let \(q=e^{2\pi i\tau}\) with \(\tau=i t\) (\(t>0\)).
- The modular transformation \(\tau \mapsto -1/\tau\) turns a “slow” series at \(t\ll 1\) into a “fast” series at \(1/t\gg 1\).

For weights \(2r\ge 4\) (i.e. \(k\ge 3\)), Eisenstein series are truly modular, giving a clean transformation formula.

### 3) Modular inversion makes the series converge instantly
Writing \(q=e^{-2\pi t}\) with \(t=-\ln(q)/(2\pi)\), one obtains for odd \(k=2r-1\) with \(r\ge 2\):
\[
E_k(q)=t^{-2r}\,E_k\!\left(e^{-2\pi/t}\right) + \left(t^{-2r}-1\right)C_r,
\]
where the constant
\[
C_r=\frac{(2r-1)!\,\zeta(2r)}{(2\pi)^{2r}}
     =(-1)^{r+1}\frac{B_{2r}}{4r}
\]
is expressible using the Bernoulli number \(B_{2r}\).

In this problem, \(t\) is extremely small, so \(e^{-2\pi/t}\) is astronomically tiny and the term \(E_k(e^{-2\pi/t})\) is negligible at the required rounding.

### 4) Exact Bernoulli numbers with rational arithmetic
The code computes Bernoulli numbers exactly as `fractions.Fraction` using the Akiyama–Tanigawa algorithm, so the constants \(C_r\) are exact rationals.

### 5) Direct summation only for the \(k=1\) example
Weight \(2\) Eisenstein series are *quasi*-modular, so the simple modular formula above does not apply for \(k=1\). The provided example with \(k=1\) is instead checked via a straightforward truncated sum using a divisor-sum sieve.

## Output formatting
The final answer is printed in scientific notation with **12 digits after the decimal point**, matching the format used in the problem statement.
