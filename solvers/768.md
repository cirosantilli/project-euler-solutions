# Project Euler 768 Solution - Chandelier

<https://projecteuler.net/problem=768>:

* [768.py](768.py)

This repository contains a self-contained solution for **Project Euler 768** (no external libraries).

## Key ideas

### 1) Roots of unity model

Number the candleholders `0..n-1`. Placing a candle at position `k` contributes the vector

\[
\zeta_n^k = e^{2\pi i k / n}.
\]

A configuration is **perfectly balanced** iff the vector sum of all chosen candle positions is zero.

### 2) Use the factorisation `360 = 5 · 8 · 9`

Write each candleholder index in the form

\[
k \equiv 5u + 72v \pmod{360}
\qquad (0 \le u < 72,\; 0 \le v < 5).
\]

Then

\[
\zeta_{360}^k = (\zeta_{360}^5)^u(\zeta_{360}^{72})^v = x^u y^v,
\]

where `x` is a primitive 72nd root and `y` is a primitive 5th root.

So the 360 candleholders split into **72 independent pentagons** (one for each `u`), each with 5 positions (the `v`’s). Choosing a subset inside one pentagon contributes:

- a candle count `0..5`, and
- an element of the cyclotomic integer ring `Z[ζ5]` (a sum of `1, y, y², y³, y⁴`).

### 3) Reduce the balance constraint over the `72`-cycle

After grouping the pentagons, balance becomes a single equation in the field `Q(ζ72, ζ5)`:

\[
\sum_{u=0}^{71} c_u\, x^u = 0,
\]

where each coefficient `c_u` is one of the 32 possible subset-sums in `Z[ζ5]`.

Now use `72 = 8 · 9` (coprime) and take a conjugate with `x = ζ8 ζ9`. Expanding in the basis of `ζ8` yields **four** independent conditions of the form

\[
F_i(\zeta_9)=0
\]

for polynomials `F_i` of degree `< 9` with coefficients in `Z[ζ5]`.

### 4) The crucial simplification: `Φ₉(t) = t⁶ + t³ + 1`

Because the minimal polynomial of `ζ9` is

\[
\Phi_9(t)=t^6+t^3+1,
\]

a degree-`< 9` polynomial vanishes at `ζ9` **iff** its coefficients are **3-periodic**. That turns the “algebraic” condition into a purely combinatorial constraint:

> for each paired row, the coefficient **difference** must be constant across columns with the same index modulo `3`.

### 5) Generating functions and factorisation into identical blocks

Once rewritten, the constraints split into **12 identical independent blocks**.

For one block, compute `P_Δ(x)`: the number of ways to choose an ordered pair of pentagon-subsets whose coefficient difference is `Δ`, as a polynomial in the number of candles used.

- Three columns share the same `Δ`, contributing `P_Δ(x)^3`.
- Summing over all `Δ` gives a single polynomial `S(x)`.
- The full chandelier count is the coefficient of `x^20` in `S(x)^{12}`.

All polynomial multiplications are truncated to degree `20`, since we only need `m = 20`.

## Files

- `main.py` — computes and prints `f(360, 20)` and includes asserts for the example values.
- `README.md` — this explanation.
