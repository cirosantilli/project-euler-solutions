# Project Euler 831 Solution - Triple Product

<https://projecteuler.net/problem=831>:

* [831.py](831.py)

This solution avoids the enormous double sum by turning it into a **single small-degree coefficient extraction**, and then exploiting the fact that the requested base is **7**.

## Key techniques

### 1) Binomial inversion / finite differences

The inner sum

\[\sum_{i=0}^{j} (-1)^{j-i} \binom{j}{i} f(i)\]

is the **j-th forward difference** of \(f\) at 0. With

\[f(i)=\binom{j+5+6i}{j+5},\]

write \(f(i)\) as a coefficient of a generating function and the forward-difference sum collapses to a power \((A-1)^j\).

### 2) Coefficient extraction and a generating function trick

Using

\[\binom{j+5+6i}{j+5} = [x^{j+5}](1+x)^{j+5+6i},\]

the whole double sum becomes a single coefficient:

\[g(m) = [x^{m+5}]\,(1+x)^5\big((1+x)^7-1\big)^m.\]

This is a standard “swap sums with coefficients” move: represent binomials as coefficients, perform the finite-difference sum, then apply the binomial theorem to remove the remaining sum.

### 3) Minimal-degree observation ⇒ only degree ≤ 5 matters

\((1+x)^7-1\) has **no constant term**, so

\[(1+x)^7-1 = 7x\,Q(x)\]

with \(Q(x)=1+3x+5x^2+5x^3+3x^4+x^5+\cdots\). Because we need the coefficient of \(x^{m+5}\), only the coefficient of \(x^5\) in

\[(1+x)^5 Q(x)^m\]

is relevant. That means **terms of degree ≥ 6 in \(Q\)** can be ignored entirely.

As a result,

\[g(m)=7^m\,c_m\]

where \(c_m\) is an ordinary integer that grows only like \(m^5\).

### 4) Base-7 digit shift

Multiplying by \(7^m\) in base 7 simply appends **m trailing zeros**. So the most significant digits of \(g(m)\) in base 7 are exactly the most significant digits of \(c_m\) in base 7.

### 5) Fast exponentiation of truncated polynomials

To compute \(c_m=[x^5](1+x)^5Q(x)^m\), we raise a degree-5 polynomial to a huge power \(m\) using **exponentiation by squaring**, while truncating all multiplications to degree 5.

This keeps the computation tiny:

- only 6 coefficients are tracked,
- multiplication is \(O(6^2)\),
- exponentiation uses \(O(\log m)\) multiplications.

## Files

- `main.py` — computes and prints the first ten base-7 digits.
- Includes asserts for the provided check value `g(10)`.
