# Project Euler 282 Solution - The Ackermann Function

<https://projecteuler.net/problem=282>:

* [282.py](282.py)

We need:

\[
S = \sum_{n=0}^6 A(n,n) \pmod{14^8}
\]

where the Ackermann function is

- \(A(0,n)=n+1\)
- \(A(m,0)=A(m-1,1)\) for \(m>0\)
- \(A(m,n)=A(m-1, A(m,n-1))\) for \(m,n>0\)

---

## Main techniques used

### 1) Ackermann → hyperoperations
For \(m\ge 1\), Ackermann relates to the hyperoperation sequence \(H_m\):

\[
A(m,n) = H_m(2, n+3) - 3
\]

This immediately gives closed forms for small \(m\):

- \(A(1,n)=n+2\)
- \(A(2,n)=2n+3\)
- \(A(3,n)=2^{n+3}-3\)
- \(A(4,n)=2^^(n+3)-3\) (tetration)

So the only hard diagonal terms are those involving **tetration** (and beyond).

---

### 2) Modular tetration without huge integers
To compute \(2^^h\) modulo \(m\), we use the defining recursion:

\[
2^^h = 2^{(2^^(h-1))}
\]

The hard part is evaluating the exponent modulo something manageable.

---

### 3) Split the modulus into coprime parts
The modulus \(14^8\) has a power-of-two component:

\[
14^8 = 2^8 \cdot 7^8
\]

The code handles any modulus by splitting it as:

\[
m = 2^k \cdot m_{odd}
\]

and computing tetration separately modulo \(2^k\) and modulo \(m_{odd}\), then recombining using **CRT**.

- Modulo \(2^k\): \(2^e \equiv 0\) once \(e \ge k\).
- Modulo odd \(m_{odd}\): \(\gcd(2,m_{odd})=1\), so exponent reduction is valid.

---

### 4) Carmichael λ for exponent reduction on the odd part
For odd \(m\), \(2\) is invertible and we can reduce exponents using Carmichael’s function \(\lambda(m)\):

\[
2^e \bmod m \text{ depends only on } e \bmod \lambda(m)
\]

So we compute the exponent as:

\[
2^^(h-1) \bmod \lambda(m)
\]

recursively. This quickly shrinks the modulus through a λ-chain.

---

### 5) Fixed point shortcut for huge heights
For our modulus, the sequence \(2^^h \bmod 14^8\) reaches a **fixed point** quickly:

\[
2^^h \equiv 2^^(h+1) \pmod{14^8}\quad \text{for all sufficiently large } h
\]

That means the astronomically large heights arising in \(A(5,5)\) and \(A(6,6)\) can be replaced by this fixed point value.

---

## Output
The program prints:

\[
1098988351
\]

which is the Project Euler 282 answer.
