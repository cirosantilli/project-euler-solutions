# Project Euler 720 Solution - Unpredictable Permutations

<https://projecteuler.net/problem=720>:

* [720.py](720.py)

### Main idea
- For `N = 2^k`, the lexicographically first 3-term-AP-free permutation has a recursive structure: start from `N=4`, then for each doubling build odds and evens ordered by the previous permutation, with the last odd and first even swapped.
- This gives explicit formulas for the Lehmer code of the permutation at size `2N` in terms of the values and Lehmer code at size `N`.
- The lexicographic rank is computed from the Lehmer code as a weighted factorial sum, processed from the end to avoid modular inverses.

### Algorithm outline
- Build arrays of permutation values and Lehmer codes up to size `2^24` using the recurrence.
- Use the size `2^24` arrays to compute the rank for size `2^25` in one reverse pass, updating a running factorial multiplier.
- Add asserts for the provided test cases and print the final result modulo `1_000_000_007`.
