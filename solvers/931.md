# Project Euler 931 Solution - Totient Graph

<https://projecteuler.net/problem=931>:

* [931.py](931.py)

This repository contains a **pure-Python** solution (no external libraries) for Project Euler problem 931.

## Key ideas

### 1) Closed form for `t(n)`
The divisor graph has an edge whenever one divisor is obtained from another by multiplying by a single **prime** `p`.
Using multiplicativity of Euler’s totient function and the formula for a prime power

- `φ(p^e) = p^(e-1) (p-1)`

the total contribution of edges associated with a prime power `p^e || n` collapses to:

- `contribution(p^e || n) = (n / p^e) * ( φ(p^e) - 1 )`

Therefore

- `t(n) = Σ_{p^e || n} (n / p^e) * ( φ(p^e) - 1 )`

This avoids building the divisor graph or enumerating divisors.

### 2) Swap the order of summation for `T(N)`
Writing numbers as `n = p^e * m` with `p ∤ m` lets us rewrite the global sum

- `T(N) = Σ_{n≤N} t(n)`

as a sum over prime powers times a simple arithmetic series over valid `m`.
The inner sum is

- `Σ_{m ≤ X, p ∤ m} m = F(X) − p * F(⌊X/p⌋)` where `F(x)=x(x+1)/2`.

### 3) Split small and large primes
For `p > √N`, only exponent `e=1` is possible (since `p^2 > N`).
Those contributions become

- `(p-2) * F(⌊N/p⌋)`

and are grouped by the quotient `q = ⌊N/p⌋`.
Within each quotient-group, we need **prime counts** and **prime sums** on an interval.

### 4) Min_25-style value sieve for `π(x)` and `Σ_{p≤x} p`
To support those interval queries efficiently, the program builds tables for

- `π(x)` (prime counting)
- `Σ_{p≤x} p` (prime summatory, kept **modulo** the required modulus)

for the structured set of `x` values that occur as `x ≤ √N` and `x = ⌊N/i⌋`.
This is a classic “value sieve” / Min_25-style technique that avoids enumerating primes up to `N`.

## Files

- `main.py` — computes the required value and prints it.
  - Includes `assert`s for the test values given in the problem statement.
- `README.md` — this summary.
